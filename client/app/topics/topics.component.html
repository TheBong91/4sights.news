<app-loading [condition]="isLoading"></app-loading>

<app-toast [message]="toast.message"></app-toast>

<div class="card" *ngIf="!isLoading">

  <button *ngFor="let category of categoriesAvailable" md-button color="primary" (click)="getTopics_category(category)">{{category}}</button>

  <h4 class="card-header">Current Topics ({{topics.length}})</h4>
  
  <div class="card-block">
    
    <md-card class="topic-card" *ngFor="let topic of topics | filterCategories:userCategoryPreferences">
          <md-card-title-group>
            <md-card-title>{{topic.title}}</md-card-title>
            <md-card-subtitle>{{topic.location}}, {{topic.timestamp}}</md-card-subtitle>
          </md-card-title-group>

          <img md-card-image src="{{topic.image}}">

          <button *ngFor="let category of topic.categories" md-button>{{category}}</button>
          <p>Sources Available: {{topic.news_article_count}}</p>

          <md-card-actions>
            <p></p>
            <button md-raised-button color="primary" (click)="open_edit(topic)"><md-icon>build</md-icon> Edit Topic</button>
            <button md-raised-button color="warn" (click)="deleteTopic(topic)"><md-icon>delete</md-icon> Delete</button>       
          </md-card-actions>
    </md-card>

    <table class="table table-bordered table-striped">
      <tbody *ngIf="topics.length === 0">
        <tr>
          <td colspan="4">There are no topics in the DB. Add a new topic below on the button.</td>
        </tr>  
      </tbody>
    </table>


  </div>

  <button md-raised-button color="primary" (click)="open_add()">Add Topic</button>

</div>
<li *ngFor="let item of items"> {{item}} </li>